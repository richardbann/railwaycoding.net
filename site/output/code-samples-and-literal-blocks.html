<!DOCTYPE html>
<html lang="en">
<head>
  <title>railwaycoding.net</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link href="https://railwaycoding.dev/theme/css/railway.css" rel="stylesheet">
  <link href="https://railwaycoding.dev/theme/css/syntax.css" rel="stylesheet">
</head>

<body>
  <div class="container">
  <h1>Code Samples and Literal Blocks</h1>
  <p>Here is a literal block, which is too wide for mobile:</p>
<pre class="literal-block">
                                 |\    /|
                              ___| \,,/_/
                           ---__/ \/    \
                          __--/     (D)  \
                          _ -/    (_      \
                         // /       \_ /  -\
   __-------_____--___--/           / \_ O o)
  /                                 /   \__/
 /                                 /
||          )                   \_/\
||         /              _      /  |
| |      /--______      ___\    /\  :
| /   __-  - _/   ------    |  |   \ \
 |   -  -   /                | |     \ )
 |  |   -  |                 | )     | |
  | |    | |                 | |    | |
  | |    &lt; |                 | |   |_/
  &lt; |    /__\                &lt;  \
  /__\                       /___\
</pre>
<p>Simple <tt class="docutils literal"><span class="pre">code-block</span></tt>, no options</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python3</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">signal</span>

<span class="kn">from</span> <span class="nn">periodtask</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">parse_cron</span><span class="p">,</span> <span class="n">send_mail</span>


<span class="n">stdout</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">fmt</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">|</span><span class="si">%(name)s</span><span class="s1">|</span><span class="si">%(asctime)s</span><span class="s1">|</span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">stdout</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;LOG_LEVEL&#39;</span><span class="p">,</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">)))</span>


<span class="k">def</span> <span class="nf">_send_mail</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">html_message</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">send_mail</span><span class="p">(</span>
      <span class="n">subject</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span>
      <span class="n">from_email</span><span class="o">=</span><span class="s1">&#39;richardbann@gmail.com&#39;</span><span class="p">,</span>
      <span class="n">recipient_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;richard.bann@vertis.com&#39;</span><span class="p">],</span>
      <span class="n">html_message</span><span class="o">=</span><span class="n">html_message</span>
  <span class="p">)</span>


<span class="n">task</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
  <span class="s1">&#39;test&#39;</span><span class="p">,</span>
  <span class="p">(</span><span class="s1">&#39;/periodtask/test_script.py&#39;</span><span class="p">,),</span>
  <span class="p">[</span><span class="n">parse_cron</span><span class="p">(</span><span class="s1">&#39;* * * * * Europe/Budapest * */5&#39;</span><span class="p">)],</span>
  <span class="n">run_on_start</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
  <span class="n">mail_failure</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
  <span class="n">mail_success</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
  <span class="n">mail_skipped</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
  <span class="n">send_mail_func</span><span class="o">=</span><span class="n">_send_mail</span><span class="p">,</span>
  <span class="n">wait_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
  <span class="n">max_lines</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
  <span class="n">stop_signal</span><span class="o">=</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
<p>Inline numberst and highlighted lines</p>
<div class="highlight"><pre><span></span><span class="lineno"> 1 </span><span class="ch">#!/usr/bin/python3</span>
<span class="lineno"> 2 </span><span class="kn">import</span> <span class="nn">logging</span>
<span class="lineno"> 3 </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="lineno"> 4 </span><span class="kn">import</span> <span class="nn">os</span>
<span class="lineno"> 5 </span><span class="kn">import</span> <span class="nn">signal</span>
<span class="lineno"> 6 </span>
<span class="lineno"> 7 </span><span class="hll"><span class="kn">from</span> <span class="nn">periodtask</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">parse_cron</span><span class="p">,</span> <span class="n">send_mail</span>
</span><span class="lineno"> 8 </span>
<span class="lineno"> 9 </span>
<span class="lineno">10 </span><span class="hll"><span class="n">stdout</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span class="lineno">11 </span><span class="hll"><span class="n">fmt</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">|</span><span class="si">%(name)s</span><span class="s1">|</span><span class="si">%(asctime)s</span><span class="s1">|</span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span class="lineno">12 </span><span class="hll"><span class="n">stdout</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
</span><span class="lineno">13 </span><span class="n">root</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="lineno">14 </span><span class="n">root</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">stdout</span><span class="p">)</span>
<span class="lineno">15 </span><span class="n">root</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;LOG_LEVEL&#39;</span><span class="p">,</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">)))</span>
</pre></div>
<p>Ancored line numbers, now it is table based</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><a href="#-1"> 1</a>
<a href="#-2"> 2</a>
<a href="#-3"> 3</a>
<a href="#-4"> 4</a>
<a href="#-5"> 5</a>
<a href="#-6"> 6</a>
<a href="#-7"> 7</a>
<a href="#-8"> 8</a>
<a href="#-9"> 9</a>
<a href="#-10">10</a>
<a href="#-11">11</a>
<a href="#-12">12</a>
<a href="#-13">13</a>
<a href="#-14">14</a>
<a href="#-15">15</a></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python3</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">signal</span>

<span class="hll"><span class="kn">from</span> <span class="nn">periodtask</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">parse_cron</span><span class="p">,</span> <span class="n">send_mail</span>
</span>

<span class="hll"><span class="n">stdout</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span class="hll"><span class="n">fmt</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">|</span><span class="si">%(name)s</span><span class="s1">|</span><span class="si">%(asctime)s</span><span class="s1">|</span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span class="hll"><span class="n">stdout</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
</span><span class="n">root</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;LOG_LEVEL&#39;</span><span class="p">,</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">)))</span>
</pre></div>
</td></tr></table><p>No anchors</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python3</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">signal</span>

<span class="hll"><span class="kn">from</span> <span class="nn">periodtask</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">parse_cron</span><span class="p">,</span> <span class="n">send_mail</span>
</span>

<span class="hll"><span class="n">stdout</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</span><span class="hll"><span class="n">fmt</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">|</span><span class="si">%(name)s</span><span class="s1">|</span><span class="si">%(asctime)s</span><span class="s1">|</span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span class="hll"><span class="n">stdout</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
</span><span class="n">root</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;LOG_LEVEL&#39;</span><span class="p">,</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">)))</span>
</pre></div>
</td></tr></table>
  </div>
</body>